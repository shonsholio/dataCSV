* main.ejs

 <form action="/upload" method="POST" enctype="multipart/form-data" >
  <input type="file" name="file" id="fileInput" >
  <select name="periodo"> 
    <option>Periodo</option>
    <option value="agosto">Agosto</option>
    <option value="septiembre">Septiembre</option>
  </select>
  <button type="submit" >examinar</button>
 </form>

 <script>
  document.getElementById('fileInput').addEventListener('change', function() {
      var file = this.files[0];
      if (file && file.type === 'application/pdf') {
          alert('Solo se permiten archivos PDF');
          this.value = '';
      }
  });
</script>

* conttroller

controller.single = (req, res) => {
  
  const file = req.file;
  const mes = req.body.periodo

  console.log(file)

  if (!file) {
    return res.status(400).send('No se seleccionó ningún archivo.');
  }

  const siPunto = file.originalname.indexOf('.')
  const extension = file.originalname.substring(siPunto + 1)
  console.log(extension)

  if (extension === 'csv') {

    console.log(file.originalname + ' ha sido cargado');
    console.log('Tipo del archivo:', file.mimetype);
    console.log('Tamaño del archivo:', file.size, 'bytes');
  
    const destino = `${process.cwd()}/uploads/${mes}.${extension}`;
    fs.rename(file.path, destino, (err) => {
      if (err) {
        console.error(err);
        return res.status(500).send('Error al procesar el archivo.');
      }
  
      res.send('Archivo subido exitosamente!');
    });

  } else {
    res.send('SOLO ESTA AUTORIZADO SUBIR ARCHIVOS CSV')
  }

}

* routes

import multer from "multer";

const upload = multer({ dest: './uploads/' });

router.post('/upload', upload.single('file'), controller.single)
